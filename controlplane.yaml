# Indicates the schema used to decode the contents.
version: v1alpha1
# Enable verbose logging to the console.
debug: false
persist: true
# Provides machine specific configuration options.
machine:
    files:
        # https://docs.siderolabs.com/talos/v1.11/configure-your-talos-cluster/images-container-runtime/containerd#set-cdi-plugin-spec-dirs-to-writable-directories
        - path: /etc/cri/conf.d/20-customization.part
          op: create
          content: |
            [plugins."io.containerd.cri.v1.runtime"]
                cdi_spec_dirs = ["/var/cdi/static", "/var/cdi/dynamic"]
    # Defines the role of the machine within the cluster.
    type: controlplane
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:CvXgXqUJ2As2gp3S7AybNou4S0MgBm8=,iv:+kQnMszbOCaxkPx1m4IME2qj7nt09R+DUPBx8wu4Sw8=,tag:O2kfwAfUYVSjd5oNw4nB8Q==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJQekNCOHFBREFnRUNBaEVBK01pSVRyVExpOEJVQ1k5RWtMaGxhVEFGQmdNclpYQXdFREVPTUF3R0ExVUUKQ2hNRmRHRnNiM013SGhjTk1qVXdPREkwTURVMU9ETXlXaGNOTXpVd09ESXlNRFUxT0RNeVdqQVFNUTR3REFZRApWUVFLRXdWMFlXeHZjekFxTUFVR0F5dGxjQU1oQUtwTkIrdjRUSmtJUDVYZnROcHBkMnhSK1RtYVpaSEhVOU1yClhEOWEvbHczbzJFd1h6QU9CZ05WSFE4QkFmOEVCQU1DQW9Rd0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSEF3RUcKQ0NzR0FRVUZCd01DTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME9CQllFRkRqTWlnUFFYMTl2TEIzWQpYL0dQcW11UElPd0RNQVVHQXl0bGNBTkJBSEJFMU1jR3poSEM3cVljcVpqVVhETDcxZCtmNm40WE9OMUdqSCt5Cm1UekJlYTIxbjFsMVM2T0lkU1N5RVlJYXptZWFpdHJNTjNQU2l0UU9JTFhVYndrPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
        key: ENC[AES256_GCM,data:yGEaGnYAQLIyy1qXt3v9UgubDF7zrXpevw2VTMnfDlVoZK/43tZCQa7KMDwXvw25pfj47zj2RkWg4BHFT8siV+t+/eKgFaeJrMJZK17LQdqKzsxS4/pMlyzAVoSrp1mdysyntcjDsH5Jt9vXPqLvZqP0HkynJEsxquTsh7qZrdrHr1ccuTV/TiP753mUr0Cdb/O02ZG8O5YCOn+UzfRVB4LNhpqTm67RSmLnJr/bl+KxMs6f,iv:Rl4eRJDdqrIVvttr4Wudx/bU2VnXOx/3dotkFqJvFqI=,tag:/yt48ejAWUBYfjy4u1V/FQ==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs:
        - 10.0.2.50
    # Used to provide additional options to the kubelet.
    kubelet:
        # The `image` field is an optional reference to an alternative kubelet image.
        image: ghcr.io/siderolabs/kubelet:v1.34.2
        # Feature gates
        extraArgs:
            # https://kubernetes.io/docs/reference/command-line-tools-reference/feature-gates/
            feature-gates: EnvFiles=true
            rotate-server-certificates: true
        # Enable container runtime default Seccomp profile.
        defaultRuntimeSeccompProfileEnabled: true
        # The `disableManifestsDirectory` field configures the kubelet to get static pod manifests from the /etc/kubernetes/manifests directory.
        disableManifestsDirectory: true
    # Used to provide instructions for installations.
    install:
        # The disk used for installations.
        disk: /dev/nvme0n1
        image: factory.talos.dev/metal-installer-secureboot/056d8e12ba2b9711c613665c43f0ebf86eb451839a22f360a42110362f84faa1:v1.11.6
        # Indicates if the installation disk should be wiped at installation time.
        wipe: true
    # Used to configure the machine's container image registry mirrors.
    registries: {}
    # Machine system disk encryption configuration.
    systemDiskEncryption:
        # State partition encryption.
        state:
            # Encryption provider to use for the encryption.
            provider: luks2
            # Defines the encryption keys generation and storage method.
            keys:
                # Key slot number for LUKS2 encryption.
                - slot: 0
                  # Enable TPM based disk encryption.
                  tpm: {}
        # Ephemeral partition encryption.
        ephemeral:
            # Encryption provider to use for the encryption.
            provider: luks2
            # Defines the encryption keys generation and storage method.
            keys:
                # Key slot number for LUKS2 encryption.
                - slot: 0
                  # Enable TPM based disk encryption.
                  tpm: {}
    # Features describe individual Talos features that can be switched on or off.
    features:
        # Enable role-based access control (RBAC).
        rbac: true
        # Enable stable default hostname.
        stableHostname: true
        # Enable checks for extended key usage of client certificates in apid.
        apidCheckExtKeyUsage: true
        # Enable XFS project quota support for EPHEMERAL partition and user disks.
        diskQuotaSupport: true
        # KubePrism - local proxy/load balancer on defined port that will distribute
        kubePrism:
            # Enable KubePrism support - will start local load balancing proxy.
            enabled: true
            # KubePrism port.
            port: 7445
        # Configures host DNS caching resolver.
        hostDNS:
            # Enable host DNS caching resolver.
            enabled: true
            # Use the host DNS resolver as upstream for Kubernetes CoreDNS pods.
            forwardKubeDNSToHost: true
            # Configures the node labels for the machine.
            # nodeLabels:
            #     node.kubernetes.io/exclude-from-external-load-balancers: ""
        # https://github.com/home-operations/tuppr?tab=readme-ov-file#installation
        kubernetesTalosAPIAccess:
            allowedKubernetesNamespaces:
                - system-upgrade
            allowedRoles:
                - os:admin
            enabled: true
# Provides cluster specific configuration options.
cluster:
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: hTtC30_7eyWphfHBFAArhsEuNEAPb-V_yjWMMUb8pac=
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:OxnJX/G1r0FS9zjAAEmNpZQ7OZRRKh/nRbRnmLgiJWggOIXW7siIrHUT9ps=,iv:Eje/K1zPYGFX/VnmscjpU6RUDIrGCXzfbIDfpYzLays=,tag:cR2sJeoq4oe5XxcF/AsnaQ==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        endpoint: https://10.0.2.50:6443
    # Configures the cluster's name.
    clusterName: escargatoire
    # Provides cluster specific network configuration options.
    network:
        cni:
            name: none
        # The domain used by Kubernetes DNS.
        dnsDomain: cluster.local
        # The pod subnet CIDR.
        podSubnets:
            - 10.244.0.0/16
        # The service subnet CIDR.
        serviceSubnets:
            - 10.96.0.0/12
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:lf7c+3MDs+aXtZtLVX/LqIO4ovcSRpc=,iv:cd+oycETmuwV2ia/hc1A6ooswWGe5/nnzHE/fyWo4o0=,tag:2XzLSYvstSevTvUmVpQv0Q==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: ENC[AES256_GCM,data:kuuXCi1Ebx0xtYa74euPJ9f2Z+42HqkLy8h5roxu6aW7wViMbHe2TmVOaVk=,iv:nIlmXhsyR8sRsWx/E+cc5l6P3zEHwta9dGDBMwx5TkE=,tag:OCUA8uB1nvxjrfWH0dChzw==,type:str]
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJpVENDQVRDZ0F3SUJBZ0lSQU9NWU1NUnlSQnM3SVlSYVhMV2JOcE13Q2dZSUtvWkl6ajBFQXdJd0ZURVQKTUJFR0ExVUVDaE1LYTNWaVpYSnVaWFJsY3pBZUZ3MHlOVEE0TWpRd05UVTRNekphRncwek5UQTRNakl3TlRVNApNekphTUJVeEV6QVJCZ05WQkFvVENtdDFZbVZ5Ym1WMFpYTXdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CCkJ3TkNBQVRsV1BoM2ZMWHh0ZWorb0JtWU5pY1ZneFpVS3VYRFFkMVF5c200a3FPMFM1OVJIMy9aRGU0V3BqWkMKWE9vZ1RabVNIVk1YWHRDbTVJVERFUzJlOGtEUG8yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXdIUVlEVlIwbApCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPCkJCWUVGSy9TZ0ZEZzB6V1pib3U5UExCRVVmamhBT2ZKTUFvR0NDcUdTTTQ5QkFNQ0EwY0FNRVFDSUZkc3V0NkYKRHhuYnMzQXdaWVl4d292SHVPeVlvS1BMZ2FvVTV0ZmIrUm5lQWlCUlpaaXhOUW04M1FjUEJELzV0c3hUV0JTOApEZXV2UDlRUnJ1Q3NKY2VRU1E9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
        key: ENC[AES256_GCM,data:ceYWVAE0qMKNqt7oRm3KYnp+qdJSfEBjfimnl0m2HrczjxN/K7Hx7GdMipdTJl3iDXKDtVfip8f3lTu0s/ov6w7XvktiDvh3uPOqsCZmFLg5l3kA+7umEByQiXzjzhkuC2K4YiNnKwxXYhgp8ggCFWphTQUXL0vQP4cSp/VOV7Nhdq4MlfrHL/RKLn52rKDyDXOzsRGR8nuCcHV2BJut5ks6H+hUZlWITw8jp2UsKdqsDSSFU3qnj8msuJ0mH82FPxEUcyyJBSJLA8GaMA8gEUTGf/VRBRyNaB3ncH+RnAy+YgvJ1DrEyrSJHKaMQa/jQ1h4Q75bMWUzbhVmAzZZBI3MRex14/PeW/Gwfy42SWiOpn5rXQxqGG2erRIv/42Q7uICVt9BHWie1PukMvTcyw==,iv:hb1xuFkHtbTmC9qPRt/vgq230VgqxD3laB4a5Vhxz50=,tag:hEDYymTBwlD5rhPwR1XEZQ==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJZRENDQVFhZ0F3SUJBZ0lSQU44c2F1S2NEd3JaZ3dtOGNvbHVKMFV3Q2dZSUtvWkl6ajBFQXdJd0FEQWUKRncweU5UQTRNalF3TlRVNE16SmFGdzB6TlRBNE1qSXdOVFU0TXpKYU1BQXdXVEFUQmdjcWhrak9QUUlCQmdncQpoa2pPUFFNQkJ3TkNBQVNOb2NJakVhTER1WVVzdVZnMEw1d2NrOGNIYW9HdUtWVDZwR1ZZaDcxaGRzM0tJREJsCkp6RmRLcjVnMnl0S0RQYmpJS2lWSFNEZllIZ25sakRTNzAzM28yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXcKSFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4dwpIUVlEVlIwT0JCWUVGT3Q5YTRvc0JqbitPbGtaMGlidnFTYTkzcURVTUFvR0NDcUdTTTQ5QkFNQ0EwZ0FNRVVDCklGcmY0SWFTRyttL2d4NDBIc0piS0RaUUJzVVVQeVhlREVoTEN3U0N3NERQQWlFQXpYb2t2VU90RlJVMVd4WjcKOXpoMSs5aFdQY1dwUUxwRWkwcEU3ZU5OS0RvPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
        key: ENC[AES256_GCM,data:Xxs7zJBw3H5lp3NmX0MFH3wdS7JIurMtCEio8jLTYFb98sg0LC2F9fFultrLOmQHT1639qDl2Zq3tHa0WbTxXIOJAdBDcGa1jIc2bn/9S48OIjQ1tDDS4Vf3KlH2R4kgZ0mZeUMb6ERokzDx4+wLtrYzscgK3sgNMOzhcCHXHndi42jVwNjs804AmxC0mVuqQ65+jzTihruYDVPy/8floqhpsuDGJFf06fciwo6NrC0eDK5tkEjYm61nnCCQEeZq/uhiLgxJaxzCzzVjU+NWiubN/X2KY0Spz4gCdTZmBdOe4lgznwHvdwB7Xx3YuLGMX+YNnTpA89A6FeIex9U2Plvpa2xprXMy87d8B5kzLngL2i6VF6FkHyp9ZT4MtP5RF6dAVAWXU+7UxnV8SuBl1Q==,iv:rWaHYgo/1Px4hkNEhAzTwC88dg64+0kTjRw+8UWzITM=,tag:tzZ3M19XeiWeegJZet3Zjw==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data: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,iv:a3NKb0VF0qZl2WtU1ccfRShnFdsHKb2/1FBw7hP+/S8=,tag:zVZF/fMNsYDW8mll22ThhA==,type:str]
    # API server specific configuration options.
    apiServer:
        # The container image used in the API server manifest.
        image: registry.k8s.io/kube-apiserver:v1.34.2
        # Feature gates
        extraArgs:
            # https://kubernetes.io/docs/reference/command-line-tools-reference/feature-gates/
            feature-gates: EnvFiles=true
        # Extra certificate subject alternative names for the API server's certificate.
        certSANs:
            - 10.0.2.50
        # Disable PodSecurityPolicy in the API server and default manifests.
        disablePodSecurityPolicy: true
        # Configure the API server admission plugins.
        admissionControl:
            # Name is the name of the admission controller.
            - name: PodSecurity
              # Configuration is an embedded configuration object to be used as the plugin's
              configuration:
                apiVersion: pod-security.admission.config.k8s.io/v1alpha1
                defaults:
                    audit: restricted
                    audit-version: latest
                    enforce: baseline
                    enforce-version: latest
                    warn: restricted
                    warn-version: latest
                exemptions:
                    namespaces:
                        - kube-system
                    runtimeClasses: []
                    usernames: []
                kind: PodSecurityConfiguration
        # Configure the API server audit policy.
        auditPolicy:
            apiVersion: audit.k8s.io/v1
            kind: Policy
            rules:
                - level: Metadata
    # Controller manager server specific configuration options.
    controllerManager:
        # The container image used in the controller manager manifest.
        image: registry.k8s.io/kube-controller-manager:v1.34.2
        extraArgs:
            # Needed for metrics
            bind-address: 0.0.0.0
    # Kube-proxy server-specific configuration options
    proxy:
        # The container image used in the kube-proxy manifest.
        disabled: true
    # Scheduler server specific configuration options.
    scheduler:
        # The container image used in the scheduler manifest.
        image: registry.k8s.io/kube-scheduler:v1.34.2
        extraArgs:
            # Needed for metrics
            bind-address: 0.0.0.0
    # Configures cluster member discovery.
    discovery:
        # Enable the cluster membership discovery feature.
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            # Kubernetes registry uses Kubernetes API server to discover cluster members and stores additional information
            kubernetes:
                # Disable Kubernetes discovery registry.
                disabled: true
            # Service registry is using an external service to push and pull information about cluster members.
            service: {}
    # Etcd specific configuration options.
    etcd:
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJmakNDQVNTZ0F3SUJBZ0lSQUxsRll2bU1IbmdpUE45cTVXYU5DbGd3Q2dZSUtvWkl6ajBFQXdJd0R6RU4KTUFzR0ExVUVDaE1FWlhSalpEQWVGdzB5TlRBNE1qUXdOVFU0TXpKYUZ3MHpOVEE0TWpJd05UVTRNekphTUE4eApEVEFMQmdOVkJBb1RCR1YwWTJRd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUJCd05DQUFTUHhhYUJ0bnZJClpoNkVFU1ZUd0ZTd0o3QUtwd2QxRy9xSEViTDNaZDUyR1dsR29WZ0JzZHRRZjBDRmNhdWtmcCtWWHhENmpLdWsKaVBHdXJ5UnJic3ZEbzJFd1h6QU9CZ05WSFE4QkFmOEVCQU1DQW9Rd0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSApBd0VHQ0NzR0FRVUZCd01DTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME9CQllFRkZuOHVzQnZFT0tHCk9YNTl1QStFWHdROVh3VlNNQW9HQ0NxR1NNNDlCQU1DQTBnQU1FVUNJSHEzTFp5aFJBd0szOGFVLzY2NmFZMkEKM0tFOE1HcDNOMjVrVzVid3JaanpBaUVBN1ovM0thR3ZqcGF0S2NQU2M0QjY1dUwwUi9VUkhzamxYQk9FU1NyeApCRGs9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
            key: ENC[AES256_GCM,data:rmgVK46ktB7YUl6VGusKa0GedHbF7vefAYJxLju6cRT/H4Cm3FCFn3s3pNWmQCncTVOd35xcvRKYrH//tWY1hXzWhwZtlzkpJgi+xkVNWsX5AkYg6NWYqurd5ZQvcqvhVATBCukJshN1tMS9NH8Ykf2wVphNX5u7FiYfCWRGW/3InaafXFeOCGCwdtzu+X+AmJrqQA1hmf+diV5cPnR+7THLufkvnz/mQ7KpH6GYtNdNaUYF4sxxHIIT9NyEoJa1VV9QcQ2SAWDIeconHJtKfuZ1yLw2dAXXWIDwQjIvRGaddTTicwetXFm4tV7UhDvdpk9RwrMTZDPnqX/KnBhOqybYT7wF0q2YCGjfUus8oPF+jj6lbc5lFcG6D8n+odlJnY2m4wDzO7nEhCB0Llpmvg==,iv:ZfZnRY/ra/lhy0zSKxEBl+0TMdsaYJA37DSe/1nptm0=,tag:E5UzzdnLydWjVQLP9G7CBQ==,type:str]
            # extraArgs:
            # For etcd metrics endpoint
            # listen-metrics-urls: http://0.0.0.0:2381
    # A list of urls that point to additional manifests.
    extraManifests: []
    # A list of inline Kubernetes manifests.
    inlineManifests: []
    # # Allows running workload on control-plane nodes.
    allowSchedulingOnControlPlanes: true
sops:
    age:
        - recipient: age1dm2uej5x6cpvclx7azp5h3ez4dp5kdggx6a30eqf0uul2deead9q2w29sf
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSBjeG1IYmQ4MXEyeHdsM05I
            ekxYQTlvTXhaZUlLZ1pGR09hRi92ZXNyTTB3ClRpZWdsMHVRU2VHUVprb2VISzdB
            Q0NhQy9UTW1jSjFMRVBYNkowdVJYTlEKLS0tIFV5V0ZKNU92YTZZY2dlclcwSW9G
            YjIxMHBZaVNERlV1c3V1YVBJMUZIeTAKwKfqjV2TNVJ7c/vg+6C9inj8Tq3AflNo
            pvv9ZodRV0H3d9SHW/9DiFnkl3AbTpX1O0ffItwyYzekM7E/a9lFOA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-12-21T21:19:01Z"
    mac: ENC[AES256_GCM,data:bAFXYXvyaC7S0Rmpa4209DrrPVo6x8h25JADle9EN0bpQQiSAuH2VuLOq93KV0Rg1YCvPlvG58XGwBqtJaZF7mHnGHJe76xj70nFEIuI6kItWn23F+4E33K3RWit8X+BXuSHzPtWH24kRgjBFfvLxRO3zJCA7MfY1NJZk3Gk0LA=,iv:mh44KPrrTNN6h7qCqjoih0H6vMa53VsnkM7PJmM1IA8=,tag:oHpCLFsLj7j+ZUVvenhxrw==,type:str]
    encrypted_regex: ^(secret|bootstraptoken|secretboxEncryptionSecret|token|key|password)$
    version: 3.11.0

# Indicates the schema used to decode the contents.
version: v1alpha1
# Enable verbose logging to the console.
debug: false
persist: true
# Provides machine specific configuration options.
machine:
    files:
        # https://docs.siderolabs.com/talos/v1.9/configure-your-talos-cluster/images-container-runtime/containerd#set-cdi-plugin-spec-dirs-to-writable-directories
        - path: /etc/cri/conf.d/20-customization.part
          op: create
          content: "[plugins.\"io.containerd.cri.v1.runtime\"]\n    cdi_spec_dirs = [\"/var/cdi/static\", \"/var/cdi/dynamic\"]      \n"
    # Defines the role of the machine within the cluster.
    type: controlplane
    # The `token` is used by a machine to join the PKI of the cluster.
    token: ENC[AES256_GCM,data:V0AjJ28PQt2vUg3Sdphwm5DRPqHKxJQ=,iv:n8k7xdbzySYFCS6Pn3T6Ryen7lpajLCJjyobPC+JQ84=,tag:6kvrSy/wzAh/M3eU5c21OQ==,type:str]
    # The root certificate authority of the PKI.
    ca:
        crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJQekNCOHFBREFnRUNBaEVBK01pSVRyVExpOEJVQ1k5RWtMaGxhVEFGQmdNclpYQXdFREVPTUF3R0ExVUUKQ2hNRmRHRnNiM013SGhjTk1qVXdPREkwTURVMU9ETXlXaGNOTXpVd09ESXlNRFUxT0RNeVdqQVFNUTR3REFZRApWUVFLRXdWMFlXeHZjekFxTUFVR0F5dGxjQU1oQUtwTkIrdjRUSmtJUDVYZnROcHBkMnhSK1RtYVpaSEhVOU1yClhEOWEvbHczbzJFd1h6QU9CZ05WSFE4QkFmOEVCQU1DQW9Rd0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSEF3RUcKQ0NzR0FRVUZCd01DTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME9CQllFRkRqTWlnUFFYMTl2TEIzWQpYL0dQcW11UElPd0RNQVVHQXl0bGNBTkJBSEJFMU1jR3poSEM3cVljcVpqVVhETDcxZCtmNm40WE9OMUdqSCt5Cm1UekJlYTIxbjFsMVM2T0lkU1N5RVlJYXptZWFpdHJNTjNQU2l0UU9JTFhVYndrPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
        key: ENC[AES256_GCM,data:L+1TgL/LM4QsK8jqZ2eIaAcsOilVm51CZrH+e7BP/hwoIgMcqNzjVoCdPa/0UZIUBGPazF6wsqthMWQ+c44dk2vheB5tD/ZLE1M0DEAqpcAhVLkcpBHDa1UxkIRLoNglU/zI2GfrWT/sTRrgJ+eTaKMpdfWio8BtGKjdRTtfls5TYAvJbeDgcxGwUti8ZVS+1i4G1jTU03Q/Em+GDOZepJvdk/IlawzPWf8tfF1S7FGb7BSt,iv:Xkzwg1owaLrGKYor5xIIqf6zBXOivA5mHZV8tndK8pM=,tag:hO3Ukj0DXoumKe5E8dFZMg==,type:str]
    # Extra certificate subject alternative names for the machine's certificate.
    certSANs: []
    # Used to provide additional options to the kubelet.
    kubelet:
        # The `image` field is an optional reference to an alternative kubelet image.
        image: ghcr.io/siderolabs/kubelet:v1.34.2
        # Feature gates
        extraArgs:
            # https://kubernetes.io/docs/reference/command-line-tools-reference/feature-gates/
            feature-gates: EnvFiles=true
            rotate-server-certificates: true
        # Enable container runtime default Seccomp profile.
        defaultRuntimeSeccompProfileEnabled: true
        # The `disableManifestsDirectory` field configures the kubelet to get static pod manifests from the /etc/kubernetes/manifests directory.
        disableManifestsDirectory: true
    # Used to provide instructions for installations.
    install:
        # The disk used for installations.
        disk: /dev/nvme0n1
        image: factory.talos.dev/metal-installer-secureboot/056d8e12ba2b9711c613665c43f0ebf86eb451839a22f360a42110362f84faa1:v1.10.7
        # Indicates if the installation disk should be wiped at installation time.
        wipe: false
    # Used to configure the machine's container image registry mirrors.
    registries: {}
    # Machine system disk encryption configuration.
    systemDiskEncryption:
        # State partition encryption.
        state:
            # Encryption provider to use for the encryption.
            provider: luks2
            # Defines the encryption keys generation and storage method.
            keys:
                # Key slot number for LUKS2 encryption.
                - slot: 0
                  # Enable TPM based disk encryption.
                  tpm: {}
        # Ephemeral partition encryption.
        ephemeral:
            # Encryption provider to use for the encryption.
            provider: luks2
            # Defines the encryption keys generation and storage method.
            keys:
                # Key slot number for LUKS2 encryption.
                - slot: 0
                  # Enable TPM based disk encryption.
                  tpm: {}
    # Features describe individual Talos features that can be switched on or off.
    features:
        # Enable role-based access control (RBAC).
        rbac: true
        # Enable stable default hostname.
        stableHostname: true
        # Enable checks for extended key usage of client certificates in apid.
        apidCheckExtKeyUsage: true
        # Enable XFS project quota support for EPHEMERAL partition and user disks.
        diskQuotaSupport: true
        # KubePrism - local proxy/load balancer on defined port that will distribute
        kubePrism:
            # Enable KubePrism support - will start local load balancing proxy.
            enabled: true
            # KubePrism port.
            port: 7445
        # Configures host DNS caching resolver.
        hostDNS:
            # Enable host DNS caching resolver.
            enabled: true
            # Use the host DNS resolver as upstream for Kubernetes CoreDNS pods.
            forwardKubeDNSToHost: true
            # Configures the node labels for the machine.
            # nodeLabels:
            #     node.kubernetes.io/exclude-from-external-load-balancers: ""
        # https://github.com/home-operations/tuppr?tab=readme-ov-file#installation
        kubernetesTalosAPIAccess:
            allowedKubernetesNamespaces:
                - system-upgrade
            allowedRoles:
                - os:admin
            enabled: true
# Provides cluster specific configuration options.
cluster:
    # Globally unique identifier for this cluster (base64 encoded random 32 bytes).
    id: hTtC30_7eyWphfHBFAArhsEuNEAPb-V_yjWMMUb8pac=
    # Shared secret of cluster (base64 encoded random 32 bytes).
    secret: ENC[AES256_GCM,data:ux3aUnOS2hxXp3mcFtuJAcLb0/WAgL3rzKrm7qOfRdHE53VwcIf44gWXJeg=,iv:0XSRatfJLB1ywYvkn23GWCLmOvZ2kcWHQBuLjnJPrz8=,tag:dMO2xqiHH8HS9CuCNsnRnw==,type:str]
    # Provides control plane specific configuration options.
    controlPlane:
        # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
        endpoint: https://10.0.2.50:6443
    # Configures the cluster's name.
    clusterName: escargatoire
    # Provides cluster specific network configuration options.
    network:
        cni:
            name: none
        # The domain used by Kubernetes DNS.
        dnsDomain: cluster.local
        # The pod subnet CIDR.
        podSubnets:
            - 10.244.0.0/16
        # The service subnet CIDR.
        serviceSubnets:
            - 10.96.0.0/12
    # The [bootstrap token](https://kubernetes.io/docs/reference/access-authn-authz/bootstrap-tokens/) used to join the cluster.
    token: ENC[AES256_GCM,data:IsQczIvvrKFmeUF/pUyY6TW/A4x+Xb8=,iv:y1NNj7XM/JzuuG/i+8A2NWCVH1zO0U13havSGNc9J/I=,tag:spIXdJpX1kGnwjTer53PnQ==,type:str]
    # A key used for the [encryption of secret data at rest](https://kubernetes.io/docs/tasks/administer-cluster/encrypt-data/).
    secretboxEncryptionSecret: ENC[AES256_GCM,data:O3nVL+xfk81rq0v3wPfcDe7WQhu483iyswX5vEGdTXb3GN8vB3rjt5a9vZc=,iv:4ZsHiEeQAAv5BfBIJvh3Anmza3QoNUn9JrhqkHXVFno=,tag:hSVFkqJTJUf4D66o+yZURA==,type:str]
    # The base64 encoded root certificate authority used by Kubernetes.
    ca:
        crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJpVENDQVRDZ0F3SUJBZ0lSQU9NWU1NUnlSQnM3SVlSYVhMV2JOcE13Q2dZSUtvWkl6ajBFQXdJd0ZURVQKTUJFR0ExVUVDaE1LYTNWaVpYSnVaWFJsY3pBZUZ3MHlOVEE0TWpRd05UVTRNekphRncwek5UQTRNakl3TlRVNApNekphTUJVeEV6QVJCZ05WQkFvVENtdDFZbVZ5Ym1WMFpYTXdXVEFUQmdjcWhrak9QUUlCQmdncWhrak9QUU1CCkJ3TkNBQVRsV1BoM2ZMWHh0ZWorb0JtWU5pY1ZneFpVS3VYRFFkMVF5c200a3FPMFM1OVJIMy9aRGU0V3BqWkMKWE9vZ1RabVNIVk1YWHRDbTVJVERFUzJlOGtEUG8yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXdIUVlEVlIwbApCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4d0hRWURWUjBPCkJCWUVGSy9TZ0ZEZzB6V1pib3U5UExCRVVmamhBT2ZKTUFvR0NDcUdTTTQ5QkFNQ0EwY0FNRVFDSUZkc3V0NkYKRHhuYnMzQXdaWVl4d292SHVPeVlvS1BMZ2FvVTV0ZmIrUm5lQWlCUlpaaXhOUW04M1FjUEJELzV0c3hUV0JTOApEZXV2UDlRUnJ1Q3NKY2VRU1E9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
        key: ENC[AES256_GCM,data:pJsPeUEsf01Ukp9yG5l69CthyGSNjVr9Afy4WwlsqdaF+RmbbOReEKqEZL96rGXA9Fq9R9HeDVs7+8GIGPovpZNRpm2V80cDCAXDyAIgS4aO8D/gWHpZrTrGjOD7i7ljNzVzUUMU7RQpY1rSzanKLtwW5z36Vy86MQBaULoGLNtpL+/NbngdR5xKKWYqpqPaa+/tZXHGB+XfyRhHAOrE6Iitv1iUevL8+rkAucx2QrTqMtEH6mrL1Z/aGuHymkpuzPKrS8P0kp9sN9CCohFmBPetU+wWK58jQcT8Qn22m8v8Kj1r5qDumm32T0tog5TaRayvbR8Rqis23vYwCyClKwucM5TgzOV9555F4+Qmh2RoTNyBy8MWWrl0n2l5njaLd58IezdnYnDDgJF9VQCxjQ==,iv:ny+Vzd0D7w67RTZYsmap9pChecNFTiLqi9lC7km9cG4=,tag:HpY8gMQv3gUAJoY4zxADnw==,type:str]
    # The base64 encoded aggregator certificate authority used by Kubernetes for front-proxy certificate generation.
    aggregatorCA:
        crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJZRENDQVFhZ0F3SUJBZ0lSQU44c2F1S2NEd3JaZ3dtOGNvbHVKMFV3Q2dZSUtvWkl6ajBFQXdJd0FEQWUKRncweU5UQTRNalF3TlRVNE16SmFGdzB6TlRBNE1qSXdOVFU0TXpKYU1BQXdXVEFUQmdjcWhrak9QUUlCQmdncQpoa2pPUFFNQkJ3TkNBQVNOb2NJakVhTER1WVVzdVZnMEw1d2NrOGNIYW9HdUtWVDZwR1ZZaDcxaGRzM0tJREJsCkp6RmRLcjVnMnl0S0RQYmpJS2lWSFNEZllIZ25sakRTNzAzM28yRXdYekFPQmdOVkhROEJBZjhFQkFNQ0FvUXcKSFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUZNQU1CQWY4dwpIUVlEVlIwT0JCWUVGT3Q5YTRvc0JqbitPbGtaMGlidnFTYTkzcURVTUFvR0NDcUdTTTQ5QkFNQ0EwZ0FNRVVDCklGcmY0SWFTRyttL2d4NDBIc0piS0RaUUJzVVVQeVhlREVoTEN3U0N3NERQQWlFQXpYb2t2VU90RlJVMVd4WjcKOXpoMSs5aFdQY1dwUUxwRWkwcEU3ZU5OS0RvPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
        key: ENC[AES256_GCM,data:8emFO4PydlTGGTncklzqys12a+AitTLWkHqtqcuO9OqxVL5eElJWYA1mR+A4WnC16KLZvkzmKqdERu1nJPUiMcosbBwCD7zKzsBB3E0JtXMCjRALNfpqgYWfAvmGEofXW2mksI+nMGBM1/qDfbdm4gXiIGWQsL96bbBpvpkys2Dapq/5eUnz2OcK1mSzgcJAl9EuaKJsfKSD8zBbGni1Wards+nIhMv1c3MMrOPi/P8AUfHGl1nvtaaC19d4ErbI57yVKde+NAxbbudXYh5/9rWGZgga4UxT3gpcB5FcB+LJYwwYut158oS7oc+EtaYlHXPUaxk8VviU63cs4VKtth12qeh0aCGH7Tu4PNQS4Sz6Xafotok8biTvu1322KcdcQJAp1RHcQOkjbzrcmTc6Q==,iv:6HDUQgN0q3J9XBBA3nFxqEagzXi+rHPX8sqBqbdSfrs=,tag:67+15otjJnn26NPdGNKpLw==,type:str]
    # The base64 encoded private key for service account token generation.
    serviceAccount:
        key: ENC[AES256_GCM,data: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,iv:JzddtlGrBchM09v3guv8qfunIPvTMkS9aF7ESq03k4M=,tag:Hl+AgMBfS58hbONHQ1VPew==,type:str]
    # API server specific configuration options.
    apiServer:
        # The container image used in the API server manifest.
        image: registry.k8s.io/kube-apiserver:v1.34.2
        # Feature gates
        extraArgs:
            # https://kubernetes.io/docs/reference/command-line-tools-reference/feature-gates/
            feature-gates: EnvFiles=true
        # Extra certificate subject alternative names for the API server's certificate.
        certSANs:
            - 10.0.2.50
        # Disable PodSecurityPolicy in the API server and default manifests.
        disablePodSecurityPolicy: true
        # Configure the API server admission plugins.
        admissionControl:
            # Name is the name of the admission controller.
            - name: PodSecurity
              # Configuration is an embedded configuration object to be used as the plugin's
              configuration:
                apiVersion: pod-security.admission.config.k8s.io/v1alpha1
                defaults:
                    audit: restricted
                    audit-version: latest
                    enforce: baseline
                    enforce-version: latest
                    warn: restricted
                    warn-version: latest
                exemptions:
                    namespaces:
                        - kube-system
                    runtimeClasses: []
                    usernames: []
                kind: PodSecurityConfiguration
        # Configure the API server audit policy.
        auditPolicy:
            apiVersion: audit.k8s.io/v1
            kind: Policy
            rules:
                - level: Metadata
    # Controller manager server specific configuration options.
    controllerManager:
        # The container image used in the controller manager manifest.
        image: registry.k8s.io/kube-controller-manager:v1.34.2
        extraArgs:
            # Needed for metrics
            bind-address: 0.0.0.0
    # Kube-proxy server-specific configuration options
    proxy:
        # The container image used in the kube-proxy manifest.
        disabled: true
    # Scheduler server specific configuration options.
    scheduler:
        # The container image used in the scheduler manifest.
        image: registry.k8s.io/kube-scheduler:v1.34.2
        extraArgs:
            # Needed for metrics
            bind-address: 0.0.0.0
    # Configures cluster member discovery.
    discovery:
        # Enable the cluster membership discovery feature.
        enabled: true
        # Configure registries used for cluster member discovery.
        registries:
            # Kubernetes registry uses Kubernetes API server to discover cluster members and stores additional information
            kubernetes:
                # Disable Kubernetes discovery registry.
                disabled: true
            # Service registry is using an external service to push and pull information about cluster members.
            service: {}
    # Etcd specific configuration options.
    etcd:
        # The `ca` is the root certificate authority of the PKI.
        ca:
            crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUJmakNDQVNTZ0F3SUJBZ0lSQUxsRll2bU1IbmdpUE45cTVXYU5DbGd3Q2dZSUtvWkl6ajBFQXdJd0R6RU4KTUFzR0ExVUVDaE1FWlhSalpEQWVGdzB5TlRBNE1qUXdOVFU0TXpKYUZ3MHpOVEE0TWpJd05UVTRNekphTUE4eApEVEFMQmdOVkJBb1RCR1YwWTJRd1dUQVRCZ2NxaGtqT1BRSUJCZ2dxaGtqT1BRTUJCd05DQUFTUHhhYUJ0bnZJClpoNkVFU1ZUd0ZTd0o3QUtwd2QxRy9xSEViTDNaZDUyR1dsR29WZ0JzZHRRZjBDRmNhdWtmcCtWWHhENmpLdWsKaVBHdXJ5UnJic3ZEbzJFd1h6QU9CZ05WSFE4QkFmOEVCQU1DQW9Rd0hRWURWUjBsQkJZd0ZBWUlLd1lCQlFVSApBd0VHQ0NzR0FRVUZCd01DTUE4R0ExVWRFd0VCL3dRRk1BTUJBZjh3SFFZRFZSME9CQllFRkZuOHVzQnZFT0tHCk9YNTl1QStFWHdROVh3VlNNQW9HQ0NxR1NNNDlCQU1DQTBnQU1FVUNJSHEzTFp5aFJBd0szOGFVLzY2NmFZMkEKM0tFOE1HcDNOMjVrVzVid3JaanpBaUVBN1ovM0thR3ZqcGF0S2NQU2M0QjY1dUwwUi9VUkhzamxYQk9FU1NyeApCRGs9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
            key: ENC[AES256_GCM,data:dBmzPWWZasomlqfmi+WuYHD0wnnsdrphMCMNhZJYCP5sLlXyyG4SxGw1HeBjn+X6pclBR2e4d0G4r1vMbxGRDRxGVxfTSiDlovjPwlq2SxYwOu4oQHyG5yRm+4u4vw+APvK99EYxBuwARAF2OSV5z3qo/0G1mkOWMx1uqmy9Yf6caC3QvLk6e339E1YaQLBoPCIgRrbq/GMqincW/G5r7CQhl91hUlG/YnBhSIJwqR8gU2coOvxdYYnksOMuUQYr3y47IhegbwsWmdRZm4VepSFogOAvz+8ZlSHVeQCfn/aQ/8yJXxTN2ISlVQOOQM+IwWMX/Khs+Du0oKbRis1aiSQaGCgSQ03eGYsor+vbKaA/ftQVL5b55icUaNLt6DvU/e9LmYH0y2eNAQ3JcUn56g==,iv:eDBCgkfR4bAQGmiQndVGCKC6WPM/oQ5JZWBIz9Fb150=,tag:S5u3lMAn67iMq77JirNJ0A==,type:str]
        extraArgs:
            # For etcd metrics endpoint
            listen-metrics-urls: http://0.0.0.0:2381
    # A list of urls that point to additional manifests.
    extraManifests: []
    #   - https://www.example.com/manifest1.yaml
    #   - https://www.example.com/manifest2.yaml
    # A list of inline Kubernetes manifests.
    inlineManifests: []
    #   - name: namespace-ci # Name of the manifest.
    #     contents: |- # Manifest contents as a string.
    #       apiVersion: v1
    #       kind: Namespace
    #       metadata:
    #       	name: ci
    # # Allows running workload on control-plane nodes.
    allowSchedulingOnControlPlanes: true
sops:
    age:
        - recipient: age1dm2uej5x6cpvclx7azp5h3ez4dp5kdggx6a30eqf0uul2deead9q2w29sf
          enc: |
            -----BEGIN AGE ENCRYPTED FILE-----
            YWdlLWVuY3J5cHRpb24ub3JnL3YxCi0+IFgyNTUxOSA2bXFIOFN6U3RENnJZbEtw
            RkJjRFJwa1p0OWdEdnVNNmlPVmZMSlRoT1RzCjNnV2RhMFRTc3Y1eDNnZTdxOVBu
            eUZjYUVCcXRjZFFlODE5bkY5d1J1M0EKLS0tIFB4czVnNnpDVWdFNWI0clQrV0dk
            bWFpVnFwQ1A0T1BxcmptbjJKYXZ6YjQKpdhgDEsLTwoIrd1xWAX4NSbVvIOmpbs1
            c7gImH6VlN7L3wnE3X3A/Hu+CTtRHSsfKVuF6xz+mH/IKZJ4ybAvcA==
            -----END AGE ENCRYPTED FILE-----
    lastmodified: "2025-12-18T04:54:57Z"
    mac: ENC[AES256_GCM,data:2p6BHgHuDhVuSgrtnCDiMTCngmzW0iTDDEfI+a4PuXG5XAEOQ9cRfKWgB+o1h3aR5Plnz2nJPu//PMQajDcr9VuZ1fSZ5PjPJpgTONJ4SWGU1pvKjgGDa9T0KvTQW289SoJhBl9h4U8VkYBf9uyPtV6YeYnDLGg1yZuQEFVvwN8=,iv:8KTS5F2DCvljP5j2qtB+yMWx/Vkj/HU/DcbYWkmjQ8Q=,tag:zAHT9kePb/7qJYrzOUzwYQ==,type:str]
    encrypted_regex: ^(secret|bootstraptoken|secretboxEncryptionSecret|token|key|password)$
    version: 3.11.0
